"use strict";(self.webpackChunkmintlayer_docs=self.webpackChunkmintlayer_docs||[]).push([[351],{2737:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"bridge/index","title":"Bridge API","description":"The purpose of the bridge is to transfer fungible tokens between Mintlayer and Ethereum chains.","source":"@site/docs/bridge/index.md","sourceDirName":"bridge","slug":"/bridge/","permalink":"/mintlayer-docs/docs/bridge/","draft":false,"unlisted":false,"editUrl":"https://github.com/mintlayer/mintlayer-docs/tree/main/docs/bridge/index.md","tags":[],"version":"current","frontMatter":{"title":"Bridge API","sidebar_label":"Bridge API"},"sidebar":"tutorialSidebar","previous":{"title":"Bridge","permalink":"/mintlayer-docs/docs/category/bridge"},"next":{"title":"Guides","permalink":"/mintlayer-docs/docs/category/guides"}}');var s=t(4848),d=t(8453);const i={title:"Bridge API",sidebar_label:"Bridge API"},r="Mintlayer-ERC20 bridge",c={},o=[];function l(e){const n={br:"br",code:"code",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"mintlayer-erc20-bridge",children:"Mintlayer-ERC20 bridge"})}),"\n",(0,s.jsx)(n.p,{children:"The purpose of the bridge is to transfer fungible tokens between Mintlayer and Ethereum chains."}),"\n",(0,s.jsx)(n.h1,{id:"api-server-endpoints",children:"API server endpoints"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/bridge-request"})," - submit a bridge request."]}),"\n",(0,s.jsx)(n.p,{children:"E.g. (e2m):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -H \'Content-type: application/json\' \\\n  --data \'{\n      "source_chain":"Ethereum-XYZ",\n      "destination_chain":"Mintlayer",\n      "asset":"FOO",\n      "amount":"100.00",\n      "receiver_address":"tmt1q94w2g3vwvw74swj3gx4kaf5qelapmdhyyyxe3ef",\n      "deposit_transactions":[{\n          "raw_transaction":"02f9...bd03"\n      }]\n  }\' \\\n  -X POST https://SERVER_URL/api/v1/bridge-request\n'})}),"\n",(0,s.jsx)(n.p,{children:"Or (m2e):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -H \'Content-type: application/json\' \\\n  --data \'{\n      "source_chain":"Mintlayer",\n      "destination_chain":"Ethereum-XYZ",\n      "asset":"FOO",\n      "amount":"100.00",\n      "receiver_address":"0x6CFF507AeA2FE77a508E13DD4C2dF495780871D5",\n      "deposit_transactions":[{\n          "intent":"e901...a9be",\n          "raw_transaction":"0100...5250"\n      }]\n  }\' \\\n  -X POST https://SERVER_URL/api/v1/bridge-request\n'})}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, instead of passing the complete deposit transaction you can specify its hash."}),"\n",(0,s.jsx)(n.p,{children:"E.g. (e2m):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'curl -H \'Content-type: application/json\' \\\n  --data \'{\n      "source_chain":"Ethereum-XYZ",\n      "destination_chain":"Mintlayer",\n      "asset":"FOO",\n      "amount":"100.00",\n      "receiver_address":"tmt1q94w2g3vwvw74swj3gx4kaf5qelapmdhyyyxe3ef",\n      "deposit_transactions":[{\n          "transaction_hash":"a76b...cb84"\n      }]\n  }\' \\\n  -X POST https://SERVER_URL/api/v1/bridge-request\n'})}),"\n",(0,s.jsx)(n.p,{children:"Same for m2e."}),"\n",(0,s.jsx)(n.p,{children:"Example response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n    "bridge_request_uuid": "aac4d30d-91c7-4e2e-94d9-00bb3709771e",\n    "deposit_transaction_uuids": ["25c43ed1-d2eb-4a1a-b546-16c67d6303af"]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Note: ",(0,s.jsx)(n.code,{children:"deposit_transaction_uuids"})," will have the same order as ",(0,s.jsx)(n.code,{children:"deposit_transactions"}),"  in the request."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/fees"})," - return the contents of the ",(0,s.jsx)(n.code,{children:"fees"})," table."]}),"\n",(0,s.jsx)(n.p,{children:"E.g.:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl -X GET https://SERVER_URL/api/v1/fees\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Example response: ",(0,s.jsx)(n.code,{children:'{"bar":{"fixed_fee":"5","percentage_fee":"0.1%"},"foo":{"fixed_fee":"10","percentage_fee":"1%"}}'}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/subscribe"})," - open a websocket to receive notifications about status changes of bridge requests as well as deposit and withdrawal transactions."]}),"\n",(0,s.jsx)(n.p,{children:"Example messages for a successful bridge request:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{"event_name":"bridge_request_status_updated","uuid":"93bc6941-ebc5-4eae-8226-de7a606defcf","status":"pending"}\n{"event_name":"deposit_transaction_status_updated","uuid":"8d6f7745-6133-4bc6-a230-dc577d1ab626","status":"not_yet_submitted"}\n{"event_name":"deposit_transaction_status_updated","uuid":"8d6f7745-6133-4bc6-a230-dc577d1ab626","status":"submitted"}\n{"event_name":"deposit_transaction_status_updated","uuid":"8d6f7745-6133-4bc6-a230-dc577d1ab626","status":"confirmed_by_network"}\n{"event_name":"withdrawal_transaction_status_updated","uuid":"a78113ac-5984-47fb-9405-785dc38e6aae","status":"master_signed"}\n{"event_name":"bridge_request_status_updated","uuid":"93bc6941-ebc5-4eae-8226-de7a606defcf","status":"processed_by_master"}\n{"event_name":"withdrawal_transaction_status_updated","uuid":"a78113ac-5984-47fb-9405-785dc38e6aae","status":"submitted_to_network"}\n{"event_name":"withdrawal_transaction_status_updated","uuid":"a78113ac-5984-47fb-9405-785dc38e6aae","status":"confirmed_by_network"}\n{"event_name":"bridge_request_status_updated","uuid":"93bc6941-ebc5-4eae-8226-de7a606defcf","status":"completed"}\n'})}),"\n",(0,s.jsx)(n.p,{children:'Note: deposit transaction status change to "submitted" won\'t happen if the transaction has been submitted to the network by other means\n(i.e. outside the bridge); in this case the status will go from "not_yet_submitted" directly to "confirmed_by_network".'}),"\n",(0,s.jsx)(n.p,{children:"Other possible statuses are:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'for bridge requests: "failed" - the request has failed, "manual" - the request requires manual handling;'}),"\n",(0,s.jsx)(n.li,{children:'for deposit transactions: "confirmation_failed" - the transaction could not be confirmed, "invalid" - the transaction is invalid;'}),"\n",(0,s.jsx)(n.li,{children:'for withdrawal transactions: "failed_revalidation" - the cosigner determined that the withdrawal transaction is invalid\n(note that this is not a normal situation), "failed_submission" - the cosigner failed to submit the withdrawal transaction\nto the network.'}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/bridge-request/{uuid}"})," - obtain some information about a bridge request given its uuid."]}),"\n",(0,s.jsx)(n.p,{children:"E.g.:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl https://SERVER_URL/api/v1/bridge-request/034d5ce2-70f4-4089-a330-97d8d8f23775\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n    "uuid":"034d5ce2-70f4-4089-a330-97d8d8f23775",\n    "source_chain":"mintlayer",\n    "destination_chain":"ethereum-xyz",\n    "asset":"foo",\n    "amount":"100",\n    "amount_after_fees":"89.1",\n    "sender_addresses":[\n        "tmt1q94w2g3vwvw74swj3gx4kaf5qelapmdhyyyxe3ef"\n    ],\n    "receiver_address":"0x6CFF507AeA2FE77a508E13DD4C2dF495780871D5",\n    "status":"completed",\n    "created_at":"2025-03-10 16:28:58.753664 +00:00:00",\n    "updated_at":"2025-03-10 16:33:43.879247 +00:00:00",\n    "deposit_transactions":[\n        {\n          "uuid":"1bcea941-2761-4655-a875-fe01c00120c6",\n          "transaction_hash":"ef366c9129f6d36b7b8a7adde13a061351ea20d16b857bacab28a0ed6f8ead2d",\n          "status":"confirmed_by_network",\n          "created_at":"2025-03-10 16:28:58.753664 +00:00:00",\n          "updated_at":"2025-03-10 16:29:10.875763 +00:00:00"\n        }\n    ],\n    "withdrawal_transaction":{\n        "uuid":"52d4bfdf-8a7c-4ea2-af54-5f287f747ffc",\n        "destination_chain":"ethereum-xyz",\n        "transaction_hash":"98267a71c2f40911da3aa71ee9beb7764729159d1c70510c42fa604c05dc2894",\n        "status":"confirmed_by_network",\n        "created_at":"2025-03-10 16:29:11.023903 +00:00:00",\n        "updated_at":"2025-03-10 16:33:43.879247 +00:00:00",\n        "bridge_request_uuids":[\n            "034d5ce2-70f4-4089-a330-97d8d8f23775"\n        ]\n    }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"Note:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The order of deposit transactions is unspecified in this case."}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"amount_after_fees"})," and ",(0,s.jsx)(n.code,{children:"withdrawal_transaction"})," will be ",(0,s.jsx)(n.code,{children:"null"})," and ",(0,s.jsx)(n.code,{children:"sender_addresses"}),"\nwill be empty if the request has not been handled by the master yet."]}),"\n",(0,s.jsxs)(n.li,{children:["The returned data contains the full info about the withdrawal transaction that handles the\nbridge request (if any) instead of just a uuid. Though this is somewhat redundant (e.g. the uuid\nof the bridge request is also present in the ",(0,s.jsx)(n.code,{children:"bridge_request_uuids"})," field of ",(0,s.jsx)(n.code,{children:"withdrawal_transaction"}),"),\nit's supposed to help reduce the number of requests that the UI has to make."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/deposit-transaction/{uuid}"})," - obtain some information about a deposit transaction given its uuid."]}),"\n",(0,s.jsx)(n.p,{children:"E.g.:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl https://SERVER_URL/api/v1/deposit-transaction/1bcea941-2761-4655-a875-fe01c00120c6\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n    "uuid":"1bcea941-2761-4655-a875-fe01c00120c6",\n    "transaction_hash":"ef366c9129f6d36b7b8a7adde13a061351ea20d16b857bacab28a0ed6f8ead2d",\n    "status":"confirmed_by_network",\n    "created_at":"2025-03-10 16:28:58.753664 +00:00:00",\n    "updated_at":"2025-03-10 16:29:10.875763 +00:00:00"\n}\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/withdrawal-transaction/{uuid}"})," - obtain some information about a withdrawal transaction given its uuid."]}),"\n",(0,s.jsx)(n.p,{children:"E.g.:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl https://SERVER_URL/api/v1/withdrawal-transaction/52d4bfdf-8a7c-4ea2-af54-5f287f747ffc\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n    "uuid":"52d4bfdf-8a7c-4ea2-af54-5f287f747ffc",\n    "destination_chain":"ethereum-xyz",\n    "transaction_hash":"98267a71c2f40911da3aa71ee9beb7764729159d1c70510c42fa604c05dc2894",\n    "status":"confirmed_by_network",\n    "created_at":"2025-03-10 16:29:11.023903 +00:00:00",\n    "updated_at":"2025-03-10 16:33:43.879247 +00:00:00",\n    "bridge_request_uuids":[\n        "034d5ce2-70f4-4089-a330-97d8d8f23775"\n    ]\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Note: in m2e the actual withdrawal transaction (i.e. the one that is sent to the network) is created by the cosigner.\nSo, the returned ",(0,s.jsx)(n.code,{children:"transaction_hash"})," will be null if the withdrawal transaction has not been handled by the cosigner yet.",(0,s.jsx)(n.br,{}),"\n","In e2m, on the other hand, the actual transaction is created by the master, so in this case ",(0,s.jsx)(n.code,{children:"transaction_hash"})," will be\nknown right away."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"api/v1/agents-config"})," - obtain agents' configuration values."]}),"\n",(0,s.jsx)(n.p,{children:"E.g.:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"curl https://SERVER_URL/api/v1/agents-config\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example response:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'{\n   "network_type":"testnet",\n   "ml_tokens":{\n      "bar":"tmltk1lht3lwdzkdydwr7qk2j6zudqssh0lunfnhua7jrczdyjuk97edaswt2fpj",\n      "foo":"tmltk1e7egscactagl7e3met67658hpl4vf9ux0ralaculjvnzhtc4qmsqv9y857"\n   },\n   "eth_flavor_specific_config":{\n      "":{\n         "token_config":{\n            "bar":{\n               "address":"0x7f6dae09b819f918314d86466a9af4564d3ed805",\n               "max_amount_per_request":null\n            },\n            "foo":{\n               "address":"0xb87a9b1cafb3b42ea7e2cb3a72b20c5695994a53",\n               "max_amount_per_request":"1000.5"\n            }\n         },\n         "infura_rpc_url":"https://sepolia.infura.io/v3/1c4fd1ef43ca40deb35e81bc47838b3f",\n         "bridge_contract_address":"0x0b3c26e254ab5e8c9d84ccdcf1957bed0890322c",\n         "e2m":null,\n         "m2e":{\n            "deposit_tx_required_confirmations":1,\n            "deposit_tx_destination":"tmt1q94w2g3vwvw74swj3gx4kaf5qelapmdhyyyxe3ef",\n            "deposit_tx_max_blocks_to_wait":10,\n            "withdrawal_tx_required_confirmations":1,\n            "resend_withdrawal_tx_after_block_count":2,\n            "multisend_contract_address":"0x38869bf66a61cf6bdb996a6ae40d5853fd43b526",\n            "gnosis_safe_address":"0xb0b61e0aaf88bc40065739112cd2347fcde3f906"\n         }\n      },\n      "xyz":{\n         "token_config":{\n            "bar":{\n               "address":"0xc00f017fbd014a4daa7898b20781508c388253a8",\n               "max_amount_per_request":null\n            },\n            "foo":{\n               "address":"0x4ef442684ef3d050c6bd54a25d4ea95d688a74e5",\n               "max_amount_per_request":"1000.5"\n            }\n         },\n         "infura_rpc_url":"https://something-else.infura.io/v3/1c4fd1ef43ca40deb35e81bc47838b3f",\n         "bridge_contract_address":"0x80285cc9ccb49456709242c18f50e60195b371be",\n         "e2m":{\n            "deposit_tx_required_confirmations":1,\n            "ml_token_owner_address":"tmtc1qnw7qgm87l0a0vhegyrw5szrgqlldkt8rczqzpc2",\n            "tx_fee_change_address":"tmt1q9pfchtsepyy6n8hx3w74e7tm3pcv5y6ncjtjysg",\n            "bridge_contract_deposit_log_record_topic":"0x2dc24880b34b2026fb1cd0231e65ef42ca1c78e4efdd9711b7629740206bfa46",\n            "deposit_tx_max_blocks_to_wait":10,\n            "withdrawal_tx_required_confirmations":1,\n            "resend_withdrawal_tx_after_block_count":2\n         },\n         "m2e":{\n            "deposit_tx_required_confirmations":1,\n            "deposit_tx_destination":"tmt1qxm8pnvpu5886kun0vv9dqzp3nxvhawgqugprcv3",\n            "deposit_tx_max_blocks_to_wait":10,\n            "withdrawal_tx_required_confirmations":1,\n            "resend_withdrawal_tx_after_block_count":2,\n            "multisend_contract_address":"0x38869bf66a61cf6bdb996a6ae40d5853fd43b526",\n            "gnosis_safe_address":"0x9f7ed25b653dfedf775b55077f0025722abd7c9f"\n         }\n      }\n   }\n}\n'})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var a=t(6540);const s={},d=a.createContext(s);function i(e){const n=a.useContext(d);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(d.Provider,{value:n},e.children)}}}]);